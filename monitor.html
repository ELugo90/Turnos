<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Monitor</title>

<style>
body{
  font-family:Arial;
  margin:0;
  text-align:center;
  display:flex;
  flex-direction:column;
  min-height:100vh;
  background:white;
}

.contenido{ flex:1; }

.logo-top{ width:150px; margin-top:20px; }

.titulo{ font-size:24px; font-weight:bold; margin:20px; }

.fila{
  display:flex;
  justify-content:center;
  flex-wrap:wrap;
  gap:10px;
}

.cuadro{
  width:70px;
  height:70px;
  display:flex;
  justify-content:center;
  align-items:center;
  color:white;
  font-size:20px;
  font-weight:bold;
  border-radius:10px;
}

.azul{ background:#1565c0;}
.naranja{ background:#ef6c00;}

footer{
  text-align:center;
  padding:15px 0;
}

.logo-footer{
  width:70px;
  display:block;
  margin:0 auto 5px auto;
}

.derechos{
  font-size:12px;
  color:#555;
}
</style>
</head>

<body>

<div class="contenido">

<img src="logo.png" class="logo-top">

<div class="titulo">EN TURNO</div>
<div id="confirmados" class="fila"></div>

<div class="titulo">PREP√ÅRATE CASI ES TU TURNO</div>
<div id="pendientes" class="fila"></div>

</div>

<footer>
  <img src="Lugo rojo.png" class="logo-footer">
  <div class="derechos">Derechos reservados.</div>
</footer>

<script type="module">

import { initializeApp } from "https://www.gstatic.com/firebasejs/10.12.0/firebase-app.js";
import { getDatabase, ref, onValue } from "https://www.gstatic.com/firebasejs/10.12.0/firebase-database.js";

const firebaseConfig = {
  apiKey: "AIzaSyAOmMmesMJ1rpP5gZnJt0w3ZuXK9VmKd9w",
  authDomain: "turnos-evento.firebaseapp.com",
  databaseURL: "https://turnos-evento-default-rtdb.firebaseio.com",
  projectId: "turnos-evento",
  storageBucket: "turnos-evento.firebasestorage.app",
  messagingSenderId: "108395086341",
  appId: "1:108395086341:web:db50986497b6deb278126c"
};

const app=initializeApp(firebaseConfig);
const db=getDatabase(app);

onValue(ref(db,"turnos"), snapshot=>{
  if(!snapshot.exists()) return;

  let lista=[];
  snapshot.forEach(child=>lista.push(child.val()));
  lista.sort((a,b)=>a.numero-b.numero);

  const confirmados=lista.filter(t=>t.estado=="confirmado").slice(-10);
  const pendientes=lista.filter(t=>t.estado=="pendiente").slice(0,10);

  document.getElementById("confirmados").innerHTML=
    confirmados.map(t=>`<div class="cuadro azul">${t.numero}</div>`).join("");

  document.getElementById("pendientes").innerHTML=
    pendientes.map(t=>`<div class="cuadro naranja">${t.numero}</div>`).join("");
});

</script>

</body>
</html>
