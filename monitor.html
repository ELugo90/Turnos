<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Monitor</title>

<script type="module">
import { initializeApp } from "https://www.gstatic.com/firebasejs/9.23.0/firebase-app.js";
import { getDatabase, ref, onValue } from "https://www.gstatic.com/firebasejs/9.23.0/firebase-database.js";

const firebaseConfig = {
  apiKey: "TU_APIKEY",
  authDomain: "turnos-evento.firebaseapp.com",
  databaseURL: "https://turnos-evento-default-rtdb.firebaseio.com",
  projectId: "turnos-evento",
  storageBucket: "turnos-evento.firebasestorage.app",
  messagingSenderId: "108395086341",
  appId: "1:108395086341:web:db50986497b6deb278126c"
};

const app = initializeApp(firebaseConfig);
const db = getDatabase(app);

onValue(ref(db,"turnos"),(snapshot)=>{

let usados=[];
let pendientes=[];

if(snapshot.exists()){
snapshot.forEach(child=>{
let data = child.val();

if(data.estado=="usado"){
usados.push(parseInt(data.numero));
}

if(data.estado=="pendiente"){
pendientes.push(parseInt(data.numero));
}
});
}

// Ordenar
usados.sort((a,b)=>a-b);
pendientes.sort((a,b)=>a-b);

// Tomar Ãºltimos 10 confirmados
let enTurno = usados.slice(-10);

// Tomar siguientes 10 pendientes
let siguientes = pendientes.slice(0,10);

// Renderizar cuadros
mostrarCuadros("enturno", enTurno, "azul");
mostrarCuadros("siguientes", siguientes, "naranja");

});

function mostrarCuadros(id, lista, color){

let contenedor = document.getElementById(id);
contenedor.innerHTML="";

for(let i=0;i<10;i++){

let div = document.createElement("div");
div.classList.add("cuadro");

if(color=="azul") div.classList.add("azul");
if(color=="naranja") div.classList.add("naranja");

if(lista[i]){
div.innerText = lista[i];
}else{
div.innerText = "-";
}

contenedor.appendChild(div);
}

}
</script>

<style>
body{
  background:white;
  font-family:Arial;
  text-align:center;
  margin:0;
}

.logo{
  width:180px;
  margin:20px auto;
  display:block;
}

.titulo{
  font-size:30px;
  font-weight:bold;
  margin:30px 0 10px 0;
}

.contenedor{
  display:flex;
  justify-content:center;
  flex-wrap:wrap;
  gap:15px;
  margin-bottom:40px;
}

.cuadro{
  width:90px;
  height:90px;
  display:flex;
  align-items:center;
  justify-content:center;
  font-size:30px;
  font-weight:bold;
  border-radius:12px;
  color:white;
}

.azul{
  background:#007BFF;
}

.naranja{
  background:#FF7A00;
}
</style>
</head>
<body>

<img src="logo.png" class="logo">

<div class="titulo">EN TURNO</div>
<div id="enturno" class="contenedor"></div>

<div class="titulo">SIGUIENTES</div>
<div id="siguientes" class="contenedor"></div>

</body>
</html>
