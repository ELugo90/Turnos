<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Monitor</title>

<style>
body{
  text-align:center;
  background:white;
  font-family:Arial, sans-serif;
  margin:0;
  padding:0;
}

.logo{
  width:160px;
  margin-top:20px;
}

.titulo{
  margin-top:10px;
  font-size:22px;
  font-weight:bold;
}

.fila{
  margin-top:20px;
}

.grid{
  display:flex;
  justify-content:center;
  gap:10px;
  flex-wrap:wrap;
  margin-top:10px;
}

.box{
  width:70px;
  height:70px;
  display:flex;
  align-items:center;
  justify-content:center;
  font-size:22px;
  font-weight:bold;
  color:white;
  border-radius:8px;
}

.azul{
  background:#0066ff;
}

.naranja{
  background:orange;
}
</style>
</head>
<body>

<img src="logo.png" class="logo">

<div class="fila">
  <div class="titulo" style="color:#0066ff;">EN TURNO</div>
  <div class="grid" id="confirmados"></div>
</div>

<div class="fila">
  <div class="titulo" style="color:orange;">PREPÁRATE CASI ES TU TURNO</div>
  <div class="grid" id="pendientes"></div>
</div>

<script type="module">
import { initializeApp } from "https://www.gstatic.com/firebasejs/10.12.0/firebase-app.js";
import { getDatabase, ref, onValue } from "https://www.gstatic.com/firebasejs/10.12.0/firebase-database.js";

const firebaseConfig = {
  apiKey: "TU_APIKEY",
  authDomain: "turnos-evento.firebaseapp.com",
  databaseURL: "https://turnos-evento-default-rtdb.firebaseio.com",
  projectId: "turnos-evento",
  storageBucket: "turnos-evento.firebasestorage.app",
  messagingSenderId: "108395086341",
  appId: "1:108395086341:web:db50986497b6deb278126c"
};

const app = initializeApp(firebaseConfig);
const db = getDatabase(app);

onValue(ref(db,"turnos"), snapshot => {

  const confirmadosDiv = document.getElementById("confirmados");
  const pendientesDiv = document.getElementById("pendientes");

  confirmadosDiv.innerHTML = "";
  pendientesDiv.innerHTML = "";

  let confirmados = [];
  let pendientes = [];

  snapshot.forEach(child => {
    const turno = child.val();
    if(turno.estado === "usado"){
      confirmados.push(turno.numero);
    } else if(turno.estado === "pendiente"){
      pendientes.push(turno.numero);
    }
  });

  confirmados.sort((a,b)=>a-b);
  pendientes.sort((a,b)=>a-b);

  // Últimos 10 confirmados
  confirmados.slice(-10).forEach(num=>{
    confirmadosDiv.innerHTML += `<div class="box azul">${num}</div>`;
  });

  // Primeros 10 pendientes
  pendientes.slice(0,10).forEach(num=>{
    pendientesDiv.innerHTML += `<div class="box naranja">${num}</div>`;
  });

});
</script>

</body>
</html>
