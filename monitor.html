<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Monitor</title>

<style>
body{
  text-align:center;
  background:white;
  font-family:Arial;
}
.logo{
  width:150px;
  margin-top:20px;
}
.grid{
  display:flex;
  flex-wrap:wrap;
  justify-content:center;
  gap:10px;
}
.box{
  width:80px;
  height:80px;
  display:flex;
  align-items:center;
  justify-content:center;
  font-size:24px;
  color:white;
}
.azul{background:#0066ff;}
.naranja{background:orange;}
</style>
</head>
<body>

<img src="logo.png" class="logo">

<h2>Monitor de Turnos</h2>

<div class="grid" id="contenedor"></div>

<script type="module">
import { initializeApp } from "https://www.gstatic.com/firebasejs/10.12.0/firebase-app.js";
import { getDatabase, ref, onValue } from "https://www.gstatic.com/firebasejs/10.12.0/firebase-database.js";

const firebaseConfig = {
  apiKey: "TU_APIKEY",
  authDomain: "turnos-evento.firebaseapp.com",
  databaseURL: "https://turnos-evento-default-rtdb.firebaseio.com",
  projectId: "turnos-evento",
  storageBucket: "turnos-evento.firebasestorage.app",
  messagingSenderId: "108395086341",
  appId: "1:108395086341:web:db50986497b6deb278126c"
};

const app = initializeApp(firebaseConfig);
const db = getDatabase(app);

onValue(ref(db,"turnos"),snapshot=>{

  const contenedor = document.getElementById("contenedor");
  contenedor.innerHTML="";

  let usados=[];
  let pendientes=[];

  snapshot.forEach(child=>{
    if(child.val().estado=="usado"){
      usados.push(child.val().numero);
    }else{
      pendientes.push(child.val().numero);
    }
  });

  usados.sort((a,b)=>a-b);
  pendientes.sort((a,b)=>a-b);

  usados.slice(-10).forEach(n=>{
    contenedor.innerHTML+=`<div class="box azul">${n}</div>`;
  });

  pendientes.slice(0,10).forEach(n=>{
    contenedor.innerHTML+=`<div class="box naranja">${n}</div>`;
  });

});
</script>

</body>
</html>
